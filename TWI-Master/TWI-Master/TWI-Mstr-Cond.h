#include <avr/io.h>

void i2c_write(unsigned char data)
{
	TWDR = data;
	TWCR = (1<<TWINT)|(1<<TWEN);
	while((TWCR&(1<<TWINT))==0);
}
/*---------------------------------------------------------------------------------------------*/
unsigned char i2c_read(unsigned char isLast)
{
	if(isLast==0)
	TWCR = (1<<TWINT)|(1<<TWEN)|(1<<TWEA);
	else
	TWCR = (1<<TWINT)|(1<<TWEN);
	while((TWCR&(1<<TWINT))==0);
	return TWDR;
}
/*---------------------------------------------------------------------------------------------*/
void i2c_start()
{
	TWCR = (1<<TWINT)|(1<<TWEN)|(1<<TWSTA);
	while((TWCR&(1<<TWINT))==0);
}
/*---------------------------------------------------------------------------------------------*/
void i2c_stop()
{
	TWCR = (1<<TWINT)|(1<<TWEN)|(1<<TWSTO);
}
/*---------------------------------------------------------------------------------------------*/
void i2c_init()
{
	TWSR = 0x00;
	TWBR = 0x00;
	TWCR = (1<<TWEN)|(1<<TWEA);
}
/*---------------------------------------------------------------------------------------------*/
